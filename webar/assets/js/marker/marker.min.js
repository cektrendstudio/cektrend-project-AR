let data3d = ["animal", "padjajaran", "dino", "octaland", "space", "ocean"],
    animation = ["rig|01_zebra_idle|01_zebra_idle", "ankylosaurus_rig|ankylosaurus_idle|ankylosaurus_idle", "fire fighter|Take 001|BaseLayer", "", "01_idle_bake"],
    url_appstore = ["https://apps.apple.com/us/app/animal-4d/id962983832", "https://apps.apple.com/us/app/dinosaur-4d/id1073564667", "https://apps.apple.com/us/app/octaland-4d/id1000598340", "https://apps.apple.com/us/app/space-4d/id1018109847", "https://apps.apple.com/us/app/ocean-4d/id1484774384"],
    url_playstore = ["https://play.google.com/store/apps/details?id=com.OctagonStudio.Animal4DPlus&hl=en", "https://play.google.com/store/apps/details?id=com.OctagonStudio.ARDinoVR&hl=en", "https://play.google.com/store/apps/details?id=com.OctagonStudio.Octaland&hl=en", "https://play.google.com/store/apps/details?id=com.OctagonStudio.SolarSys&hl=en", "https://play.google.com/store/apps/details?id=com.Octagon.Ocean4D"];
var stat_load = 0,
    stat_scan = 0;
let orderNo = 0,
    lastOrder = data3d.length,
    bgm_model = new Howl({
        src: "./assets/audio/animal.mp3",
        volume: .7,
        loop: !1
    });

function changeShow(e) {
    stat_load = 0;
    let t = document.getElementById("3d-model"),
        o = t.getAttribute("data-model"),
        a = data3d.indexOf(o);
    var l = document.querySelector(".bg-color");
    document.querySelector(".container-ui"), document.querySelector(".arrow"), document.querySelector(".footer");
    bgm_model.stop(), l.style.display = "block", orderNo = "next" == e ? ++a == data3d.length ? 0 : a : 0 == a ? data3d.length - 1 : a - 1;
    let s = data3d[orderNo] + ".mp3";
    bgm_model = new Howl({
        src: "./assets/audio/" + s,
        volume: .7,
        loop: !1
    }), t.removeAttribute("animation-mixer"), t.setAttribute("gltf-model", "./assets/3d/" + data3d[orderNo] + ".glb"), t.setAttribute("data-model", data3d[orderNo]), document.getElementById("header-logo").setAttribute("src", "./assets/images/" + data3d[orderNo] + "-logo.png")
}

function openStore(e) {
    var t = url_appstore[orderNo];
    "android" == e && (t = url_playstore[orderNo]), window.open(t, "_blank")
}
AFRAME.registerComponent("markerhandler", {
    init: function () {
        let e = document.getElementById("3d-model");
        var t = this.el;
        let o = document.querySelector(".scan-container"),
            a = document.querySelector(".container-ui"),
            l = document.querySelector(".arrow"),
            s = document.querySelector(".footer");
        t.addEventListener("markerFound", function () {
            stat_load ? (e.setAttribute("visible", !0), a.style.display = "block", l.style.display = "block", o.style.display = "none", s.style.display = "flex", bgm_model.play(), stat_scan = 1) : (e.setAttribute("visible", !1), a.style.display = "none", l.style.display = "none", s.style.display = "none", bgm_model.stop(), stat_scan = 0)
        }), t.addEventListener("markerLost", function () {
            e.setAttribute("visible", "false"), a.style.display = "none", l.style.display = "none", s.style.display = "none", o.style.display = "block", bgm_model.stop(), stat_scan = 0
        })
    }
}), AFRAME.registerComponent("modelhandler", {
    init: function () {
        this.el.addEventListener("model-loaded", async e => {
            let t = document.getElementById("3d-model");
            "space" == data3d[orderNo] ? t.setAttribute("scale", "0.2 0.2 0.2") : ("octaland" == data3d[orderNo] ? (console.log("octaland_euy"), t.setAttribute("scale", "0.05 0.05 0.05")) : t.setAttribute("scale", "1 1 1"), t.setAttribute("animation-mixer", "clip", animation[orderNo])), stat_scan && bgm_model.play(), setTimeout(() => {
                document.querySelector(".bg-color").style.display = "none", stat_load = 1
            }, 200)
        })
    }
});